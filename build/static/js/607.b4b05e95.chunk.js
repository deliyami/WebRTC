"use strict";(self.webpackChunkwebrtc=self.webpackChunkwebrtc||[]).push([[607],{9607:function(e,n,r){r.r(n);var t=r(4165),c=r(5861),u=r(2130),a=r(2791),s=r(4138),o=r(9738),i=r(6145),f=r(184),p=(0,a.forwardRef)((function(e,n){var r=e.canvasRef,p=e.vrm,d=e.setVrm,l=e.setSuccess;(0,a.useImperativeHandle)(n,(function(){return{animate:Z}}));var v=(0,a.useRef)(new s.xsS),w=(0,a.useRef)(),m=(0,a.useRef)(),h=(0,a.useRef)(),x=function(){var e=(0,c.Z)((0,t.Z)().mark((function e(){var n;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new i.E).crossOrigin="anonymous",e.next=4,n.load("https://cdn.glitch.com/29e07830-2317-4b15-a044-135e73c7f840%2FAshtra.vrm?v=1630342336981",function(){var e=(0,c.Z)((0,t.Z)().mark((function e(n){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.ck.removeUnnecessaryJoints(n.scene);case 2:return e.next=4,u.n4.from(n).then((function(e){console.log("object"),v.current.add(e.scene),d(e)}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),(function(e){return console.log("Loading model...",e.loaded/e.total*100,"%")}),(function(e){return console.error(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){w.current=new s.CP7({canvas:r.current,alpha:!0}),w.current.setPixelRatio(window.devicePixelRatio),m.current=new s.cPb(35,300/225,.1,1e3),m.current.position.set(-.1,1.4,.7);var e=new o.z(m.current,w.current.domElement);e.screenSpacePanning=!0,e.target.set(-.1,1.4,0),e.update();var n=new s.Ox3(16777215);n.position.set(1,1,1).normalize(),v.current.add(n),h.current=new s.SUY},Z=function(){h.current&&w.current&&m.current&&(p&&p.update(h.current.getDelta()),w.current.render(v.current,m.current))};return(0,a.useEffect)((function(){(0,c.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:g(),l(!0);case 4:case"end":return e.stop()}}),e)})))()}),[]),(0,f.jsx)(f.Fragment,{children:(0,f.jsx)("canvas",{ref:r})})}));n.default=p}}]);
//# sourceMappingURL=607.b4b05e95.chunk.js.map